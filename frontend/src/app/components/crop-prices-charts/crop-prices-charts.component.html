<div class="charts-container">
    <div class="charts-header" *ngIf="hasData">
        <h2>Crop Price Charts</h2>
        <p class="charts-summary">{{ totalCharts }} charts across {{ organizedData.length }} categories</p>
    </div>

    <!-- Category Expansion Panels -->
    <div class="category-expansion" *ngIf="hasData">
        <mat-expansion-panel *ngFor="let category of organizedData" class="category-panel" [expanded]="true">
            <mat-expansion-panel-header class="category-header">
                <mat-panel-title class="category-title">
                    <span class="category-icon">ðŸŒ¾</span>
                    {{ getCategoryDisplayName(category.categoryId) }}
                </mat-panel-title>
                <mat-panel-description class="category-description">
                    {{ category.sources.length }} Sources
                </mat-panel-description>
            </mat-expansion-panel-header>

            <!-- Source Expansion Panels -->
            <div class="source-expansion">
                <mat-expansion-panel *ngFor="let source of category.sources" class="source-panel" [expanded]="true">
                    <mat-expansion-panel-header class="source-header">
                        <mat-panel-title class="source-title">
                            <span class="source-icon">ðŸ“º</span>
                            {{ getSourceDisplayName(source.sourceId) }}
                        </mat-panel-title>
                        <mat-panel-description class="source-description">
                            {{ source.types.length }} Types
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <!-- Type Charts Grid -->
                    <div class="type-charts-grid">
                        <app-crop-details-chart
                            *ngFor="let type of source.types"
                            [cropData]="type.data"
                            [cropTypeId]="getCropTypeDisplayName(type.typeId)"
                            [cropCategoryId]="getCategoryDisplayName(category.categoryId)"
                            [sourceId]="getSourceDisplayName(source.sourceId)">
                        </app-crop-details-chart>
                    </div>
                </mat-expansion-panel>
            </div>
        </mat-expansion-panel>
    </div>

    <div class="no-data" *ngIf="!hasData">
        <div class="no-data-content">
            <h3>No Data Available</h3>
            <p>Please check your data source or try again later.</p>
        </div>
    </div>
</div>